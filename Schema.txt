-- ADMINS
CREATE TABLE IF NOT EXISTS admins (
  id            BIGINT PRIMARY KEY AUTO_INCREMENT,
  username      VARCHAR(100) NOT NULL UNIQUE,
  password_hash VARCHAR(200) NOT NULL,
  created_at    DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at    DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB;

-- USERS
CREATE TABLE IF NOT EXISTS users (
  id            BIGINT PRIMARY KEY AUTO_INCREMENT,
  user_id       VARCHAR(20) NOT NULL UNIQUE,      -- e.g., ACE-703 (case-insensitive constraint handled in app)
  password_hash VARCHAR(255) NOT NULL,
  created_at    DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at    DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB;

-- WHITELISTED USERS
CREATE TABLE IF NOT EXISTS whitelisted_users (
  id              BIGINT PRIMARY KEY AUTO_INCREMENT,
  admin_id        BIGINT NOT NULL,
  user_id         VARCHAR(20) NOT NULL,          
  created_at      DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at      DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  access_revoked  TINYINT(1) NOT NULL DEFAULT 0
) ENGINE=InnoDB;